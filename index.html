<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flujograma Vertical Tienda Limpieza</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #e0e5ec;
            display: flex;
            justify-content: center;
            padding: 40px;
            margin: 0;
        }
        .canvas-paper {
            background-color: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
            text-align: center;
        }
        h1 {
            color: #003366;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }
        p { color: #666; margin-bottom: 40px; }
        .mermaid { display: flex; justify-content: center; }
    </style>
</head>
<body>

<div class="canvas-paper">


    <div class="mermaid">


%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#ffffff', 'edgeLabelBackground':'#ffffff', 'tertiaryColor': '#f4f4f4', 'fontFamily': 'Roboto', 'lineColor': '#003366', 'primaryBorderColor': '#003366', 'primaryTextColor': '#003366'}}}%%

graph LR

    %% Estilos
    classDef proceso fill:#ffffff,stroke:#003366,stroke-width:1px,color:#003366;
    classDef decision fill:#e6f2ff,stroke:#003366,stroke-width:2px,color:#003366;
    classDef data fill:#f9f9f9,stroke:#003366,stroke-width:1px,stroke-dasharray:5 5,color:#003366;

    Init[Inicializar Sistema]:::proceso --> Load[/Cargar CSV: Clientes, Vendedores, Productos/]:::data

    Load --> Login{LOGIN}:::decision
    Login --> Creds[/Ingresar Usuario y Clave/]:::data
    Creds --> Check{¿Es válido?}:::decision
    Check -- No --> Login
    Check -- Sí --> Menu{MENÚ PRINCIPAL}:::decision

    %% 1. VENTA
    Menu -- "1. Venta" --> FindCli[/Buscar Cliente/]:::data
    FindCli --> FoundCli{¿Existe?}:::decision
    FoundCli -- No --> Menu
    FoundCli -- Sí --> FindVen[/Buscar Vendedor/]:::data
    FindVen --> FoundVen{¿Existe?}:::decision
    FoundVen -- No --> Menu
    FoundVen -- Sí --> Loop{AGREGAR ITEMS}:::decision

    Loop --> FindProd[/Buscar Producto/]:::data
    FindProd --> FoundPro{¿Existe?}:::decision
    FoundPro -- No --> FindProd
    FoundPro -- Si --> FoundCanti[/Ingresar Cantidad/]:::data
    FoundCanti --> Stock{¿Hay Stock?}:::decision
    Stock -- No --> Loop
    Stock -- Sí --> Add[Agregar a Cola]:::proceso
    Add --> More{¿Otro producto?}:::decision
    More -- Sí --> Loop
    More -- No --> GenBol[Generar Boleta]:::proceso
    GenBol --> FinVenta

    %% 2. CREAR CLIENTE
    Menu -- "2. Crear Cliente" --> FindCl[/Ingresar datos Cliente/]:::data
    FindCl --> CreaCli[Cliente creado]:::proceso
    CreaCli --> SaveCli[/Guardar en Datos_Clientes.csv/]:::data

    %% 3. CREAR VENDEDOR
    Menu -- "3. Crear Vendedor" --> FindVe[/Ingresar datos Vendedor/]:::data
    FindVe --> CreaVend[Vendedor creado]:::proceso
    CreaVend --> SaveVen[/Guardar en Datos_Vendedores.csv/]:::data

    %% 4. CREAR PRODUCTO
    Menu -- "4. Crear Producto" --> FindCod[/Generar código automático/]:::data
    FindCod --> FindPr[/Ingresar datos Producto/]:::data
    FindPr --> CreaPro[Producto creado]:::proceso
    CreaPro --> SavePro[/Guardar en Datos_Productos.csv/]:::data

    %% 5. ELIMINAR CLIENTE
    Menu -- "5. Eliminar Cliente" --> FindEliCli[/Buscar Cliente/]:::data
    FindEliCli --> FoundEliCli{¿Existe?}:::decision
    FoundEliCli -- No --> Menu
    FoundEliCli -- Si --> FoundEliCl[/Cliente eliminado/]:::data

    %% 6. ELIMINAR VENDEDOR
    Menu -- "6. Eliminar Vendedor" --> FindEliVen[/Buscar Vendedor/]:::data
    FindEliVen --> FoundEliVen{¿Existe?}:::decision
    FoundEliVen -- No --> Menu
    FoundEliVen -- Si --> FoundEliVenMsg[/Vendedor eliminado/]:::data

    %% 7. ELIMINAR PRODUCTO
    Menu -- "7. Eliminar Producto" --> FindEliProd[/Buscar Producto/]:::data
    FindEliProd --> FoundEliProd{¿Existe?}:::decision
    FoundEliProd -- No --> Menu
    FoundEliProd -- Si --> FoundEliProdMsg[/Producto eliminado/]:::data

    %% 8. MOSTRAR CLIENTES
    Menu -- "8. Mostrar Clientes" --> FindMosCli[/Leer Datos_Clientes.csv/]:::data --> FoundMosCli[/Mostrar Clientes/]:::data

    %% 9. MOSTRAR VENDEDORES
    Menu -- "9. Mostrar Vendedores" --> FindMosVen[/Leer Datos_Vendedores.csv/]:::data --> FoundMosVen[/Mostrar Vendedores/]:::data

    %% 10. MOSTRAR PRODUCTOS
    Menu -- "10. Mostrar Productos" --> FindMosProd[/Leer Datos_Productos.csv/]:::data --> FoundMosProd[/Mostrar Productos/]:::data

    %% 11. INGRESAR NUEVO STOCK
    Menu -- "11. Ingresar nuevo stock" --> FindStock[/Buscar Producto/]:::data
    FindStock --> FoundStock{¿Existe?}:::decision
    FoundStock -- No --> Menu
    FoundStock -- Si --> FoundInCa[/Ingrese Cantidad/]:::data
    FoundInCa --> FoundInPre[/Ingrese nuevo precio/]:::data
    FoundInPre --> FoundReg[/Stock registrado/]:::data

    %% 12. CERRAR SESIÓN
    Menu -- "12. Cerrar sesión" --> Login


        
    </div>
</div>

<script>
    mermaid.initialize({ startOnLoad: true });
</script>

</body>
</html>